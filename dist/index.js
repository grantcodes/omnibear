(function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=27)})([function(e,t,n){!function(e,n){n(t)}(0,function(e){function t(e,t){var n,r,o,i,s;for(s=arguments.length;s-- >2;)P.push(arguments[s]);for(t&&t.children&&(P.length||P.push(t.children),delete t.children);P.length;)if((o=P.pop())instanceof Array)for(s=o.length;s--;)P.push(o[s]);else null!=o&&!0!==o&&!1!==o&&("number"==typeof o&&(o=String(o)),(i="string"==typeof o)&&r?n[n.length-1]+=o:((n||(n=[])).push(o),r=i));var a=new function(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}(e,t||void 0,n||S);return j.vnode&&j.vnode(a),a}function n(e,t){if(t)for(var n in t)e[n]=t[n];return e}function r(e){return n({},e)}function o(e){return"function"==typeof e}function i(e){return"string"==typeof e}function s(e){!e._dirty&&(e._dirty=!0)&&1==D.push(e)&&(j.debounceRendering||x)(a)}function a(){var e,t=D;for(D=[];e=t.pop();)e._dirty&&w(e)}function u(e){var t=e&&e.nodeName;return t&&o(t)&&!(t.prototype&&t.prototype.render)}function c(e,t){return e.nodeName(p(e),t||M)}function l(e,t){return e.normalizedNodeName===t||T(e.nodeName)===T(t)}function p(e){var t=r(e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,r,s){if("className"===t&&(t="class"),"class"===t&&r&&"object"==typeof r&&(r=function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(r)),"key"===t);else if("class"!==t||s)if("style"===t){if((!r||i(r)||i(n))&&(e.style.cssText=r||""),r&&"object"==typeof r){if(!i(n))for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"!=typeof r[a]||R[a]?r[a]:r[a]+"px"}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var u=e._listeners||(e._listeners={});t=T(t.substring(2)),r?u[t]||e.addEventListener(t,h,!!L[t]):u[t]&&e.removeEventListener(t,h,!!L[t]),u[t]=r}else if("list"!==t&&"type"!==t&&!s&&t in e)(function(e,t,n){try{e[t]=n}catch(e){}})(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var c=s&&t.match(/^xlink\:?(.+)/);null==r||!1===r?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",T(c[1])):e.removeAttribute(t):"object"==typeof r||o(r)||(c?e.setAttributeNS("http://www.w3.org/1999/xlink",T(c[1]),r):e.setAttribute(t,r))}else e.className=r||""}function h(e){return this._listeners[e.type](j.event&&j.event(e)||e)}function y(e,t){var n=T(e),r=U[n]&&U[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return r.normalizedNodeName=n,r}function m(){for(var e;e=I.pop();)j.afterMount&&j.afterMount(e),e.componentDidMount&&e.componentDidMount()}function b(e,t,n,r,o,i){F++||(q=o&&void 0!==o.ownerSVGElement,z=e&&!(A in e));var s=g(e,t,n,r);return o&&s.parentNode!==o&&o.appendChild(s),--F||(z=!1,i||m()),s}function g(e,t,n,r){for(var s=t&&t.attributes&&t.attributes.ref;u(t);)t=c(t,n);if(null==t&&(t=""),i(t))return e&&e instanceof Text&&e.parentNode?e.nodeValue!=t&&(e.nodeValue=t):(e&&v(e),e=document.createTextNode(t)),e;if(o(t.nodeName))return function(e,t,n,r){var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,u=a,c=p(t);for(;o&&!u&&(o=o._parentComponent);)u=o.constructor===t.nodeName;o&&u&&(!r||o._component)?(E(o,c,3,n,r),e=o.base):(i&&!a&&(O(i,!0),e=s=null),o=_(t.nodeName,c,n),e&&!o.nextBase&&(o.nextBase=e,s=null),E(o,c,1,n,r),e=o.base,s&&e!==s&&(s._component=null,v(s)));return e}(e,t,n,r);var a=e,h=String(t.nodeName),m=q,b=t.children;if(q="svg"===h||"foreignObject"!==h&&q,e){if(!l(e,h)){for(a=y(h,q);e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),v(e)}}else a=y(h,q);var w=a.firstChild,k=a[A];if(!k){a[A]=k={};for(var j=a.attributes,P=j.length;P--;)k[j[P].name]=j[P].value}return!z&&b&&1===b.length&&"string"==typeof b[0]&&w&&w instanceof Text&&!w.nextSibling?w.nodeValue!=b[0]&&(w.nodeValue=b[0]):(b&&b.length||w)&&function(e,t,n,r,s){var a,c,p,d,h=e.childNodes,y=[],m={},b=0,_=0,E=h.length,w=0,O=t&&t.length;if(E)for(S=0;S<E;S++){var k=h[S],j=k[A];null!=(P=O?(c=k._component)?c.__key:j?j.key:null:null)?(b++,m[P]=k):(z||s||j||k instanceof Text)&&(y[w++]=k)}if(O)for(S=0;S<O;S++){p=t[S],d=null;var P=p.key;if(null!=P)b&&P in m&&(d=m[P],m[P]=void 0,b--);else if(!d&&_<w)for(a=_;a<w;a++)if((c=y[a])&&function(e,t){return i(t)?e instanceof Text:i(t.nodeName)?!e._componentConstructor&&l(e,t.nodeName):o(t.nodeName)?!e._componentConstructor||e._componentConstructor===t.nodeName||u(t):void 0}(c,p)){d=c,y[a]=void 0,a===w-1&&w--,a===_&&_++;break}(d=g(d,p,n,r))&&d!==e&&(S>=E?e.appendChild(d):d!==h[S]&&(d===h[S+1]&&f(h[S]),e.insertBefore(d,h[S]||null)))}if(b)for(var S in m)m[S]&&v(m[S]);for(;_<=w;)(d=y[w--])&&v(d)}(a,b,n,r,!!k.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&r in t||null==n[r]||d(e,r,n[r],n[r]=void 0,q);if(t)for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],q)}(a,t.attributes,k),s&&(k.ref=s)(a),q=m,a}function v(e,t){var n=e._component;if(n)O(n,!t);else{e[A]&&e[A].ref&&e[A].ref(null),t||function(e){if(f(e),e instanceof Element){e._component=e._componentConstructor=null;var t=e.normalizedNodeName||T(e.nodeName);(U[t]||(U[t]=[])).push(e)}}(e);for(var r;r=e.lastChild;)v(r,t)}}function _(e,t,n){var r=new e(t,n),o=H[e.name];if(k.call(r,t,n),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function E(e,t,n,r,o){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===j.syncComponentUpdates&&e.base?s(e):w(e,1,o)),e.__ref&&e.__ref(e))}function w(e,t,i,s){if(!e._disable){var a,l,f,d,h=e.props,y=e.state,g=e.context,k=e.prevProps||h,P=e.prevState||y,S=e.prevContext||g,C=e.base,T=e.nextBase,N=C||T,x=e._component;if(C&&(e.props=k,e.state=P,e.context=S,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(h,y,g)?a=!0:e.componentWillUpdate&&e.componentWillUpdate(h,y,g),e.props=h,e.state=y,e.context=g),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!a){for(e.render&&(l=e.render(h,y,g)),e.getChildContext&&(g=n(r(g),e.getChildContext()));u(l);)l=c(l,g);var M,A,R=l&&l.nodeName;if(o(R)){var L=p(l);(f=x)&&f.constructor===R&&L.key==f.__key?E(f,L,1,g):(M=f,(f=_(R,L,g)).nextBase=f.nextBase||T,f._parentComponent=e,e._component=f,E(f,L,0,g),w(f,1,i,!0)),A=f.base}else d=N,(M=x)&&(d=e._component=null),(N||1===t)&&(d&&(d._component=null),A=b(d,l,g,i||!C,N&&N.parentNode,!0));if(N&&A!==N&&f!==x){var D=N.parentNode;D&&A!==D&&(D.replaceChild(A,N),M||(N._component=null,v(N)))}if(M&&O(M,A!==N),e.base=A,A&&!s){for(var U=e,q=e;q=q._parentComponent;)(U=q).base=A;A._component=U,A._componentConstructor=U.constructor}}!C||i?I.unshift(e):a||(e.componentDidUpdate&&e.componentDidUpdate(k,P,S),j.afterUpdate&&j.afterUpdate(e));var z,H=e._renderCallbacks;if(H)for(;z=H.pop();)z.call(e);F||s||m()}}function O(e,t){j.beforeUnmount&&j.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;if(r)O(r,t);else if(n){n[A]&&n[A].ref&&n[A].ref(null),e.nextBase=n,t&&(f(n),function(e){var t=e.constructor.name,n=H[t];n?n.push(e):H[t]=[e]}(e));for(var o;o=n.lastChild;)v(o,!t)}e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function k(e,t){this._dirty=!0,this.context=t,this.props=e,this.state||(this.state={})}var j={},P=[],S=[],C={},T=function(e){return C[e]||(C[e]=e.toLowerCase())},N="undefined"!=typeof Promise&&Promise.resolve(),x=N?function(e){N.then(e)}:setTimeout,M={},A="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",R={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},L={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},D=[],U={},I=[],F=0,q=!1,z=!1,H={};n(k.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={});return n[e+t]||(n[e+t]=function(e,t,n){var r=t.split(".");return function(t){for(var o=t&&t.target||this,s={},a=s,u=i(n)?function(e,t){for(var r=n.split("."),o=0;o<r.length&&e;o++)e=e[r[o]];return e}(t):o.nodeName?o.type.match(/^che|rad/)?o.checked:o.value:t,c=0;c<r.length-1;c++)a=a[r[c]]||(a[r[c]]=!c&&e.state[r[c]]||{});a[r[c]]=u,e.setState(s)}}(this,e,t))},setState:function(e,t){var i=this.state;this.prevState||(this.prevState=r(i)),n(i,o(e)?e(i,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),s(this)},forceUpdate:function(){w(this,2)},render:function(){}}),e.h=t,e.cloneElement=function(e,o){return t(e.nodeName,n(r(e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)},e.Component=k,e.render=function(e,t,n){return b(n,e,{},!1,t)},e.rerender=a,e.options=j})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=function(e){e.preventDefault(),e.target.href&&chrome.tabs.create({url:e.target.href})},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.getAuthTab=function(){return new Promise(function(e,t){chrome.tabs.query({url:"https://omnibear.com/auth/success*"},function(n){n.length?e(n[0]):t("Auth tab not found")})})},t.logout=function(){["token","domain","authEndpoint","tokenEndpoint","micropubEndpoint"].map(function(e){return localStorage.removeItem(e)})}},function(e,t,n){"use strict";var r=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],n,o):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,i){var s=n[i];return r.call(e,i)?e[i]=t.merge(e[i],s,o):e[i]=s,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var i=t.charCodeAt(r);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(r):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],s=Object.keys(i),a=0;a<s.length;++a){var u=s[a],c=i[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:i,prop:u}),n.push(c))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14));t.default=new r.default({clientId:"https://omnibear.com",redirectUri:"https://omnibear.com/auth/success/",state:"very-secret-omnibear-state",me:localStorage.getItem("domain"),authEndpoint:localStorage.getItem("authEndpoint"),tokenEndpoint:localStorage.getItem("tokenEndpoint"),micropubEndpoint:localStorage.getItem("micropubEndpoint"),token:localStorage.getItem("token")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NEW_NOTE="new-note",t.PAGE_REPLY="page-reply",t.ITEM_REPLY="item-reply",t.MESSAGE_SUCCESS="success",t.MESSAGE_ERROR="error"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=n(5),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){return(0,i.h)("div",{className:this.getClass()},this.props.children,this.props.location?(0,i.h)("span",null,":",(0,i.h)("br",null),(0,i.h)("a",{href:this.props.location},this.props.location)):null)}},{key:"getClass",value:function(){var e,t=(e={},r(e,s.MESSAGE_INFO,"message message--info"),r(e,s.MESSAGE_SUCCESS,"message message--success"),r(e,s.MESSAGE_ERROR,"message message--danger"),e);return t[this.props.type]||t[s.MESSAGE_INFO]}}]),t}();t.default=a},function(e,t,n){"use strict";var r=n(9),o=n(8),i=n(2);e.exports={formats:i,parse:o,stringify:r}},function(e,t,n){"use strict";var r=n(3),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,s),u=0;u<a.length;++u){var c,l,p=a[u],f=p.indexOf("]="),d=-1===f?p.indexOf("="):f+1;-1===d?(c=t.decoder(p,i.decoder),l=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,d),i.decoder),l=t.decoder(p.slice(d+1),i.decoder)),o.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n}(e,n):e,a=n.plainObjects?Object.create(null):{},u=Object.keys(s),c=0;c<u.length;++c){var l=u[c],p=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(r),a=s?r.slice(0,s.index):r,u=[];if(a){if(!n.plainObjects&&o.call(Object.prototype,a)&&!n.allowPrototypes)return;u.push(a)}for(var c=0;null!==(s=i.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+r.slice(s.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,s=e[o];if("[]"===s)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(a,10);!isNaN(u)&&s!==a&&String(u)===a&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[])[u]=r:i[a]=r}r=i}return r}(u,t,n)}}(l,s[l],n);a=r.merge(a,p,n)}return r.compact(a)}},function(e,t,n){"use strict";var r=n(3),o=n(2),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var n=e,s=t?r.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?a.delimiter:s.delimiter,c="boolean"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,l="boolean"==typeof s.skipNulls?s.skipNulls:a.skipNulls,p="boolean"==typeof s.encode?s.encode:a.encode,f="function"==typeof s.encoder?s.encoder:a.encoder,d="function"==typeof s.sort?s.sort:null,h=void 0!==s.allowDots&&s.allowDots,y="function"==typeof s.serializeDate?s.serializeDate:a.serializeDate,m="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var b,g,v=o.formatters[s.format];"function"==typeof s.filter?n=(g=s.filter)("",n):Array.isArray(s.filter)&&(b=g=s.filter);var _=[];if("object"!=typeof n||null===n)return"";var E;E=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var w=i[E];b||(b=Object.keys(n)),d&&b.sort(d);for(var O=0;O<b.length;++O){var k=b[O];l&&null===n[k]||(_=_.concat(function e(t,n,o,i,s,u,c,l,p,f,d,h){var y=t;if("function"==typeof c)y=c(n,y);else if(y instanceof Date)y=f(y);else if(null===y){if(i)return u&&!h?u(n,a.encoder):n;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||r.isBuffer(y))return u?[d(h?n:u(n,a.encoder))+"="+d(u(y,a.encoder))]:[d(n)+"="+d(String(y))];var m=[];if(void 0===y)return m;var b;if(Array.isArray(c))b=c;else{var g=Object.keys(y);b=l?g.sort(l):g}for(var v=0;v<b.length;++v){var _=b[v];s&&null===y[_]||(m=Array.isArray(y)?m.concat(e(y[_],o(n,_),o,i,s,u,c,l,p,f,d,h)):m.concat(e(y[_],n+(p?"."+_:"["+_+"]"),o,i,s,u,c,l,p,f,d,h)))}return m}(n[k],k,w,c,l,p?f:null,g,d,h,y,v,m)))}var j=_.join(u),P=!0===s.addQueryPrefix?"?":"";return j.length>0?P+j:""}},function(e,t,n){"use strict";var r=n(7);n.n(r);n.o(r,"parse")&&n.d(t,"a",function(){return r.parse}),n.o(r,"stringify")&&n.d(t,"c",function(){return r.stringify});var o=n(13);n.d(t,"b",function(){return o.a});var i=n(12);n.d(t,"d",function(){return i.a});var s=n(11);n.d(t,"e",function(){return s.a})},function(e,t,n){"use strict";t.a=function(e,t){const n=-1==e.indexOf("?")?"?":"&";let r=[];for(var o in t)Array.isArray(t[o])?t[o].forEach(e=>{r.push(o+"[]="+encodeURIComponent(e))}):r.push(o+"="+encodeURIComponent(t[o]));return e+n+r.join("&")}},function(e,t,n){"use strict";function r(e,t=new FormData,n=!1){return Object.keys(e).forEach(o=>{const i=e[o];n&&(o=n+"["+o+"]"),Array.isArray(i)?t=r(i,t,o):t.append(o,i)}),t}t.a=r},function(e,t,n){"use strict";t.a=function(e,t){let n={},r=t;const o=(new DOMParser).parseFromString(e,"text/html"),i=o.querySelector("base[href]"),s=o.querySelectorAll("[rel][href]");if(i){const e=i.getAttribute("href"),t=new URL(e,t);r=t.toString()}return s.length&&s.forEach(e=>{const t=e.getAttribute("rel").toLowerCase().split("\\s+"),o=e.getAttribute("href");t.length&&null!==o&&t.forEach(e=>{n[e]||(n[e]=[]);const t=new URL(o,r).toString();-1===n[e].indexOf(t)&&n[e].push(t)})}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var r=n(10);const o=r.a,i=r.b,s=r.c,a=r.d,u=r.e;r.FormData&&!e.FormData&&(e.FormData=r.FormData),r.DOMParser&&!e.DOMParser&&(e.DOMParser=r.DOMParser),r.URL&&!e.URL&&(e.URL=r.URL);const c={me:"",scope:"post create delete update",token:"",authEndpoint:"",tokenEndpoint:"",micropubEndpoint:""},l=(e,t=null,n=null)=>({message:e,status:t,error:n});class p{constructor(e={}){this.options=Object.assign(c,e),this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.undelete=this.undelete.bind(this),this.postMicropub=this.postMicropub.bind(this),this.checkRequiredOptions=this.checkRequiredOptions.bind(this),this.getAuthUrl=this.getAuthUrl.bind(this),this.getEndpointsFromUrl=this.getEndpointsFromUrl.bind(this)}checkRequiredOptions(e){let t=[],n=!0;for(var r=0;r<e.length;r++){const o=e[r];this.options[o]||(n=!1,t.push(o))}return{pass:n,missing:t}}getEndpointsFromUrl(e){return new Promise((t,n)=>{let r={micropub:null,authorization_endpoint:null,token_endpoint:null},o=e;fetch(e).then(e=>{if(!e.ok)return n(l("Error getting page",e.status));o=e.url;const t=e.headers.get("link");if(t){t.split(",").forEach(e=>{Object.keys(r).forEach(t=>{const n=e.match(/rel=("([^"]*)"|([^,"<]+))/);if(n&&n[1]&&n[1].indexOf(t)>=0){const n=e.match(/[^<>|\s]+/g);n&&n[0]&&(r[t]=n[0])}})})}return e.text()}).then(s=>{const a=i(s,o);return this.options.me=e,a&&Object.keys(r).forEach(e=>{a[e]&&a[e][0]&&(r[e]=a[e][0])}),r.micropub&&r.authorization_endpoint&&r.token_endpoint?(this.options.micropubEndpoint=r.micropub,this.options.tokenEndpoint=r.token_endpoint,this.options.authEndpoint=r.authorization_endpoint,t({auth:this.options.authEndpoint,token:this.options.tokenEndpoint,micropub:this.options.micropubEndpoint})):n(l("Error getting microformats data"))}).catch(e=>n(l("Error fetching url",null,e)))})}getToken(e){return new Promise((t,n)=>{const r=this.checkRequiredOptions(["me","state","scope","clientId","redirectUri","tokenEndpoint"]);if(!r.pass)return n(l("Missing required options: "+r.missing.join(", ")));const i={grant_type:"authorization_code",state:this.options.state,me:this.options.me,code:e,scope:this.options.scope,state:this.options.state,client_id:this.options.clientId,redirect_uri:this.options.redirectUri},a={method:"POST",body:s(i),headers:new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json, application/x-www-form-urlencoded"})};fetch(this.options.tokenEndpoint,a).then(e=>{if(!e.ok)return n(l("Error getting token",e.status));const t=e.headers.get("Content-Type");return t&&0===t.indexOf("application/json")?e.json():e.text()}).then(e=>("string"==typeof e&&(e=o(e)),e.error_description?n(l(e.error_description)):e.error?n(l(e.error)):e.me&&e.scope&&e.access_token?e.me&&e.me.replace(/\/+$/,"")!==this.options.me.replace(/\/+$/,"")?n(l("The me values did not match")):(this.options.token=e.access_token,void t(e.access_token)):n(l("The token endpoint did not return the expected parameters")))).catch(e=>n(l("Error requesting token endpoint",null,e)))})}getAuthUrl(){return new Promise((e,t)=>{let n=this.checkRequiredOptions(["me","state"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));this.getEndpointsFromUrl(this.options.me).then(()=>{let n=this.checkRequiredOptions(["me","state","scope","clientId","redirectUri"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));const r={me:this.options.me,client_id:this.options.clientId,redirect_uri:this.options.redirectUri,response_type:"code",scope:this.options.scope,state:this.options.state};e(this.options.authEndpoint+"?"+s(r))}).catch(e=>t(l("Error getting auth url",null,e)))})}verifyToken(){return new Promise((e,t)=>{const n=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));const r={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token})};fetch(this.options.micropubEndpoint,r).then(n=>n.ok?e(!0):t(l("Error verifying token",n.status))).catch(e=>t(l("Error verifying token",null,e)))})}create(e,t="json"){return this.postMicropub(e,t)}update(e,t){return this.postMicropub(Object.assign({action:"update",url:e},t))}delete(e){return this.postMicropub({action:"delete",url:e})}undelete(e){return this.postMicropub({action:"undelete",url:e})}postMicropub(e,t="json"){return new Promise((n,r)=>{const i=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!i.pass)return r(l("Missing required options: "+i.missing.join(", ")));let u={method:"POST"};"json"==t?(u.body=JSON.stringify(e),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/json",Accept:"application/json, application/x-www-form-urlencoded"})):"form"==t?(u.body=s(e),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json, application/x-www-form-urlencoded"})):"multipart"==t&&(u.body=a(e),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":void 0,Accept:"application/json, application/x-www-form-urlencoded"})),fetch(this.options.micropubEndpoint,u).then(e=>{if(!e.ok)return r(l("Error with micropub request",e.status));const t=e.headers.get("Location")||e.headers.get("location");if(t)return n(t);const o=e.headers.get("Content-Type");return o&&0===o.indexOf("application/json")?e.json():e.text()}).then(e=>("string"==typeof e&&(e=o(e)),e.error_description?r(l(e.error_description)):e.error?r(l(e.error)):n(e))).catch(e=>r(l("Error sending request",null,e)))})}postMedia(e){return new Promise((t,n)=>{const r=this.checkRequiredOptions(["token","mediaEndpoint"]);if(!r.pass)return n(l("Missing required options: "+r.missing.join(", ")));let o={method:"POST",body:a({file:e}),headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":void 0,Accept:"*/*"})};fetch(this.options.mediaEndpoint,o).then(e=>{if(201!==e.status)return n(l("Error creating media",e.status));const r=e.headers.get("Location")||e.headers.get("location");return r?t(r):n(l("Media endpoint did not return a location",e.status))}).catch(e=>n(l("Error sending request")))})}query(e){return new Promise((t,n)=>{const r=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!r.pass)return n(l("Missing required options: "+r.missing.join(", ")));const o=u(this.options.micropubEndpoint,{q:e}),i={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json"})};fetch(o,i).then(t=>t.ok?t.json():n(l("Error getting "+e,t.status))).then(e=>t(e)).catch(t=>n(l("Error getting "+e,null,t)))})}querySource(e,t=[]){return new Promise((n,r)=>{const o=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!o.pass)return r(l("Missing required options: "+o.missing.join(", ")));e=u(this.options.micropubEndpoint,{q:"source",url:e,properties:t});const i={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json"})};fetch(e,i).then(e=>e.ok?e.json():r(l("Error getting source",e.status))).then(e=>n(e)).catch(e=>r(l("Error getting source",null,e)))})}}t.default=p}.call(t,n(15))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=r(n(25)),a=r(n(26)),u=r(n(6)),c=n(1),l=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.displayMessage=function(e,t,r){n.setState({currentView:"feedback",message:e,postLocation:"string"==typeof r?r:null})},n.handleLogout=function(){(0,c.logout)(),n.setState({currentView:"login"})},n.isAuthenticated()?n.setState({currentView:"new-note"}):n.setState({currentView:"login"}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){switch(this.state.currentView){case"login":return(0,i.h)(s.default,null);case"feedback":return(0,i.h)(u.default,{location:this.state.postLocation},this.state.message);default:return(0,i.h)(a.default,{handleLogout:this.handleLogout,userFeedback:this.displayMessage})}}},{key:"isAuthenticated",value:function(){return!!localStorage.getItem("token")}}]),t}();t.default=l},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),s=n(5),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){this.props.postType;return(0,o.h)("div",{className:"inline-links"},this.renderNewNote(),this.renderPageReply(),this.renderItemReply())}},{key:"renderNewNote",value:function(){return this.props.postType===s.NEW_NOTE?(0,o.h)("span",null,"New note"):(0,o.h)(i.default,{onClick:this.switchTo(s.NEW_NOTE)},"New note")}},{key:"renderPageReply",value:function(){return this.props.postType===s.PAGE_REPLY?(0,o.h)("span",null,"Current page"):(0,o.h)(i.default,{onClick:this.switchTo(s.PAGE_REPLY)},"Current page")}},{key:"renderItemReply",value:function(){return this.props.hasSelectedEntry?this.props.postType===s.ITEM_REPLY?(0,o.h)("span",null,"Selected entry"):(0,o.h)(i.default,{onClick:this.switchTo(s.ITEM_REPLY)},"Selected entry"):(0,o.h)("span",{className:"disabled"},"Selected entry")}},{key:"switchTo",value:function(e){var t=this;return function(){t.props.onChange(e)}}}]),t}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=function(e){function t(){var e,n,o,i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleClick=function(e){e.preventDefault(),o.props.onLogout()},i=n,r(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){return(0,i.h)("footer",{className:"footer"},(0,i.h)("div",null,"Authenticated to ",(0,i.h)("strong",null,this.props.domain)),(0,i.h)("button",{className:"button-link",onClick:this.handleClick},"Logout"))}}]),t}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=n(1),a=function(e){function t(){var e,n,o,i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.focus=function(){o.content.focus()},o.onSubmit=function(e){e.preventDefault(),o.props.onSubmit(o.props.entry)},i=n,r(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"componentDidMount",value:function(){setTimeout(this.focus,150)}},{key:"render",value:function(){var e=this;return(0,i.h)("form",{onSubmit:this.onSubmit},(0,i.h)("div",null,(0,i.h)("label",{for:"input-content"},"Content"),(0,i.h)("textarea",{id:"input-content",value:this.props.entry.content,onInput:this.updateField("content"),onBlur:this.updateField("content"),rows:"4",disabled:this.props.isDisabled,ref:function(t){e.content=t}}),(0,i.h)("div",{class:"input-extra"},this.props.entry.content.length)),(0,i.h)("div",null,(0,i.h)("label",{for:"input-category"},"Tags (space separated)"),(0,i.h)("input",{id:"input-category",type:"text",placeholder:"e.g. web  personal",value:this.props.entry.category.join(" "),onChange:this.updateFieldArray("category"),disabled:this.props.isDisabled})),(0,i.h)("div",null,(0,i.h)("label",{for:"input-slug"},"Slug"),(0,i.h)("input",{id:"input-slug",type:"text",name:"slug",value:this.props.entry.slug,onChange:this.updateField("slug"),disabled:this.props.isDisabled})),(0,i.h)("button",{type:"submit",disabled:this.props.isDisabled||!this.props.entry.content,className:this.props.isLoading?"is-loading":""},"Post"))}},{key:"updateField",value:function(e){var t=this;return function(n){var r=(0,s.clone)(t.props.entry);r[e]=n.target.value,t.props.updateEntry(r)}}},{key:"updateFieldArray",value:function(e){var t=this;return function(n){n.preventDefault();var r=(0,s.clone)(t.props.entry);r[e]=n.target.value.trim().split(" "),t.props.updateEntry(r)}}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=n(5),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return(0,o.h)("header",{className:this.getClass()},(0,o.h)("div",null,this.getMessage(),this.props.url?(0,o.h)("div",{class:"metadata"},this.props.url):null),this.renderQuickActions(),this.renderReacji())}},{key:"getClass",value:function(){var e={};return e[i.NEW_NOTE]="header header--new",e[i.PAGE_REPLY]="header header--page",e[i.ITEM_REPLY]="header header--item",e[this.props.postType]}},{key:"getMessage",value:function(){var e={};return e[i.NEW_NOTE]="New Note",e[i.PAGE_REPLY]="Reply to current page",e[i.ITEM_REPLY]="Reply to selected entry",e[this.props.postType]}},{key:"renderQuickActions",value:function(){return this.props.url?(0,o.h)("ul",{className:"quick-actions"},(0,o.h)("li",null,(0,o.h)("button",{onClick:this.props.onRepost,disabled:this.props.isDisabled},"repost")),(0,o.h)("li",null,(0,o.h)("button",{onClick:this.props.onLike,disabled:this.props.isDisabled},"like"))):null}},{key:"renderReacji",value:function(){var e=this;if(!this.props.url)return null;return(0,o.h)("ul",{className:"reacji-actions"},[128077,128078,127881,10084,128518,128558,128546,128544].map(function(t){return(0,o.h)("li",null,(0,o.h)("button",{onClick:function(){return e.props.onReacji(String.fromCodePoint(t))},disabled:e.props.isDisabled},String.fromCodePoint(t)))}))}}]),t}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=function(e){function t(){var e,n,o,i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleClick=function(e){e.preventDefault(),o.props.onClick()},i=n,r(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){return(0,i.h)("button",{className:"button-link",onClick:this.handleClick},this.props.children)}}]),t}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),a=r(n(6)),u=n(1),c=r(n(4)),l=function(e){function t(){var e,n,r,i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){r.setState({domain:e.target.value,hasErrors:!1})},r.handleSubmit=function(e){e.preventDefault();var t=r.getNormalizedDomain();r.setState({isLoading:!0,domain:t}),c.default.options.me=t,c.default.getAuthUrl().then(function(e){chrome.runtime.sendMessage({action:"begin-auth",payload:{authUrl:e,domain:r.state.domain,metadata:{authEndpoint:c.default.options.authEndpoint,tokenEndpoint:c.default.options.tokenEndpoint,micropub:c.default.options.micropubEndpoint}}})}).catch(function(e){return r.setState({hasErrors:!0,errorMessage:"Missing micropub data on "+r.state.domain+". Please ensure the following links are present: authorization_endpoint, token_endpoint, micropub",isLoading:!1})})},i=n,o(r,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.input.focus()},150)}},{key:"render",value:function(){var e=this;return(0,s.h)("form",{class:"container",method:"GET",onSubmit:this.handleSubmit},(0,s.h)("p",null,"To use Omnibear, sign in with your domain. Your website will need to support"," ",(0,s.h)("a",{href:"http://indieweb.org/micropub",onClick:u.openLink},"Micropub")," ","for creating new posts."),(0,s.h)("div",{class:"fields-inline"},(0,s.h)("input",{type:"text",name:"me",placeholder:"https://example.com",className:"fields-inline__fill",value:this.state.domain,onInput:this.handleChange,disabled:this.state.isLoading,ref:function(t){return e.input=t}}),(0,s.h)("button",{type:"submit",disabled:this.state.isLoading,className:this.state.isLoading?"is-loading":""},"Sign in")),this.state.hasErrors?(0,s.h)(a.default,{type:"error"},this.state.errorMessage||"Error"):null)}},{key:"getNormalizedDomain",value:function(){return this.state.domain.startsWith("http://")||this.state.domain.startsWith("https://")?this.state.domain:"http://"+this.state.domain}},{key:"getFields",value:function(e){return["redirect_uri=https://omnibear.com/auth/success/","client_id=https://omnibear.com","response_type=code","scope=create","me="+e].join("&")}}]),t}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),s=r(n(23)),a=r(n(6)),u=r(n(20)),c=r(n(22)),l=r(n(21)),p=r(n(4)),f=n(5),d=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));h.call(n);var r=null,o=void 0,i=localStorage.getItem("selectedEntry");return-1===location.search.indexOf("reply=true")?o=f.NEW_NOTE:i?(o=f.ITEM_REPLY,r=i):(o=f.PAGE_REPLY,r=localStorage.getItem("pageUrl")),n.state={postType:o,url:r,userDomain:localStorage.getItem("domain"),entry:{h:"entry",content:"",category:[],slug:""},hasSelectedEntry:!!i,isDisabled:!1,isLoading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"render",value:function(){var e=this;return(0,i.h)("div",null,(0,i.h)(s.default,{postType:this.state.postType,url:this.state.url,onLike:this.handleLike,onRepost:this.handleRepost,onReacji:this.handleReacji,isDisabled:this.state.isLoading}),(0,i.h)("div",{className:"container"},(0,i.h)("div",{className:"text-right"},(0,i.h)(u.default,{postType:this.state.postType,onChange:this.changeView,hasSelectedEntry:this.state.hasSelectedEntry})),(0,i.h)(c.default,{entry:this.state.entry,updateEntry:this.updateEntry,onSubmit:this.handleSubmit,isDisabled:this.state.isDisabled,isLoading:this.state.isLoading,ref:function(t){return e.form=t}}),this.state.errorMessage?(0,i.h)(a.default,{type:f.MESSAGE_ERROR},this.state.errorMessage):null),(0,i.h)(l.default,{domain:this.state.userDomain,onLogout:this.props.handleLogout}))}},{key:"flashSuccessMessage",value:function(e,t){this.props.userFeedback(e,f.MESSAGE_SUCCESS,t),setTimeout(function(){window.close()},3e3)}},{key:"flashErrorMessage",value:function(e){var t=this;this.setState({errorMessage:e,isDisabled:!1,isLoading:!1}),setTimeout(function(){t.state.errorMessage===e&&t.setState({errorMessage:!1})},4e3)}},{key:"postEntry",value:function(e){return this.setState({isDisabled:!0,isLoading:!0}),p.default.create(e,"form")}}]),t}(),h=function(){var e=this;this.handleLike=function(){e.state.url&&e.postEntry({h:"entry","like-of":e.state.url}).then(function(t){var n=e.state.postType===f.ITEM_REPLY?"Item":"Page";e.flashSuccessMessage(n+" liked successfully",t)}).catch(function(t){console.error(t),e.flashErrorMessage("Error posting like")})},this.handleRepost=function(){e.state.url&&e.postEntry({h:"entry","repost-of":e.state.url}).then(function(t){var n=e.state.postType===f.ITEM_REPLY?"Item":"Page";e.flashSuccessMessage(n+" reposted successfully",t)}).catch(function(t){console.error(t),e.flashErrorMessage("Error reposting")})},this.handleReacji=function(t){e.state.url&&e.postEntry({h:"entry",content:t,"in-reply-to":e.state.url}).then(function(t){var n=e.state.postType===f.ITEM_REPLY?"Item":"Page";e.flashSuccessMessage(n+" reacted to successfully",t)}).catch(function(t){console.error(t),e.flashErrorMessage("Error reacting")})},this.updateEntry=function(t){e.setState({entry:t})},this.handleSubmit=function(t){e.state.postType!==f.NEW_NOTE&&(t["in-reply-to"]=e.state.url),e.postEntry(t).then(function(t){var n=e.state.postType===f.NEW_NOTE?"Note":"Reply";e.flashSuccessMessage(n+" posted successfully",t)}).catch(function(t){e.flashErrorMessage("Error posting Note")})},this.changeView=function(t){var n=void 0;switch(t){case f.NEW_NOTE:n=null;break;case f.PAGE_REPLY:n=localStorage.getItem("pageUrl");break;case f.ITEM_REPLY:n=localStorage.getItem("selectedEntry")}e.setState({url:n,postType:t}),e.form.focus()}};t.default=d},function(e,t,n){"use strict";var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(16));document.addEventListener("DOMContentLoaded",function(){(0,r.render)((0,r.h)(o.default,null),document.body)})}]);